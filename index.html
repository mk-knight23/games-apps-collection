<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ® Ultimate Games Collection - AI-Powered Gaming Hub</title>
  <link rel="stylesheet" href="assets/css/theme.css">
  <style>
    body {
      min-height: 100vh;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      overflow-x: hidden;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      padding: 60px 20px;
      position: relative;
    }

    .header h1 {
      font-size: clamp(2rem, 5vw, 4rem);
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 20px;
      animation: glow 2s ease-in-out infinite;
    }

    @keyframes glow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.3); }
    }

    .subtitle {
      font-size: 1.2rem;
      color: var(--text-secondary);
      margin-bottom: 30px;
    }

    .stats-bar {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 40px 0;
    }

    .stat-card {
      padding: 20px 30px;
      border-radius: 12px;
      text-align: center;
      min-width: 150px;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: var(--accent-primary);
    }

    .stat-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-top: 5px;
    }

    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
      margin: 40px 0;
    }

    .game-card {
      padding: 30px;
      border-radius: 20px;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .game-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }

    .game-card:hover::before {
      opacity: 0.1;
    }

    .game-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 40px var(--shadow);
    }

    .game-card > * {
      position: relative;
      z-index: 1;
    }

    .game-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      display: block;
    }

    .game-title {
      font-size: 1.8rem;
      margin-bottom: 10px;
      color: var(--text-primary);
    }

    .game-desc {
      color: var(--text-secondary);
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .game-features {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }

    .feature-tag {
      padding: 6px 12px;
      background: var(--bg-tertiary);
      border-radius: 20px;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .game-stats {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
      padding: 15px;
      background: var(--bg-tertiary);
      border-radius: 10px;
    }

    .game-stat {
      text-align: center;
    }

    .game-stat-value {
      font-weight: bold;
      color: var(--accent-primary);
    }

    .play-btn {
      width: 100%;
      padding: 15px;
      font-size: 1.1rem;
      border-radius: 12px;
      margin-top: 10px;
    }

    .ai-panel {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 350px;
      max-height: 500px;
      border-radius: 20px;
      padding: 20px;
      transform: translateX(400px);
      transition: transform 0.3s ease;
      z-index: 999;
    }

    .ai-panel.active {
      transform: translateX(0);
    }

    .ai-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: none;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      color: white;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 20px var(--shadow);
      z-index: 998;
      transition: all 0.3s ease;
    }

    .ai-toggle:hover {
      transform: scale(1.1);
    }

    .ai-messages {
      max-height: 300px;
      overflow-y: auto;
      margin: 20px 0;
    }

    .ai-message {
      padding: 12px;
      background: var(--bg-tertiary);
      border-radius: 10px;
      margin-bottom: 10px;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .filters {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 30px 0;
    }

    .filter-btn {
      padding: 10px 20px;
      border: 2px solid var(--accent-primary);
      background: transparent;
      color: var(--text-primary);
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .filter-btn.active {
      background: var(--accent-primary);
      color: white;
    }

    .search-bar {
      max-width: 600px;
      margin: 30px auto;
      position: relative;
    }

    .search-bar input {
      width: 100%;
      padding: 15px 50px 15px 20px;
      border: 2px solid var(--glass-border);
      background: var(--glass-bg);
      border-radius: 50px;
      color: var(--text-primary);
      font-size: 1rem;
    }

    .search-bar input:focus {
      outline: none;
      border-color: var(--accent-primary);
    }

    .search-icon {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.5rem;
    }

    @media (max-width: 768px) {
      .games-grid {
        grid-template-columns: 1fr;
      }
      
      .ai-panel {
        width: calc(100% - 40px);
        bottom: 90px;
      }
    }

    .leaderboard {
      margin: 40px 0;
      padding: 30px;
      border-radius: 20px;
    }

    .leaderboard-title {
      font-size: 2rem;
      margin-bottom: 20px;
      text-align: center;
    }

    .leaderboard-list {
      display: grid;
      gap: 15px;
    }

    .leaderboard-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: var(--bg-tertiary);
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .leaderboard-item:hover {
      transform: translateX(5px);
    }

    .rank {
      font-size: 1.5rem;
      font-weight: bold;
      min-width: 50px;
    }

    .rank.gold { color: #ffd700; }
    .rank.silver { color: #c0c0c0; }
    .rank.bronze { color: #cd7f32; }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
    <span id="theme-icon">ğŸŒ™</span>
  </button>

  <div class="container">
    <header class="header">
      <h1>ğŸ® Ultimate Games Collection</h1>
      <p class="subtitle">AI-Powered Gaming Experience with 5 Unique Games</p>
      
      <div class="stats-bar">
        <div class="stat-card glass">
          <div class="stat-value" id="total-games">5</div>
          <div class="stat-label">Games</div>
        </div>
        <div class="stat-card glass">
          <div class="stat-value" id="total-plays">0</div>
          <div class="stat-label">Total Plays</div>
        </div>
        <div class="stat-card glass">
          <div class="stat-value" id="best-score">0</div>
          <div class="stat-label">Best Score</div>
        </div>
        <div class="stat-card glass">
          <div class="stat-value" id="play-time">0h</div>
          <div class="stat-label">Play Time</div>
        </div>
      </div>
    </header>

    <div class="search-bar">
      <input type="text" id="search" placeholder="Search games..." oninput="filterGames()">
      <span class="search-icon">ğŸ”</span>
    </div>

    <div class="filters">
      <button class="filter-btn active" onclick="filterByType('all')">All Games</button>
      <button class="filter-btn" onclick="filterByType('strategy')">Strategy</button>
      <button class="filter-btn" onclick="filterByType('action')">Action</button>
      <button class="filter-btn" onclick="filterByType('puzzle')">Puzzle</button>
      <button class="filter-btn" onclick="filterByType('rhythm')">Rhythm</button>
    </div>

    <div class="games-grid" id="games-grid">
      <div class="game-card glass" data-type="strategy" data-game="zombie-plant">
        <span class="game-icon">ğŸŒ±ğŸ§Ÿ</span>
        <h2 class="game-title">Zombie Plant Defenders</h2>
        <p class="game-desc">Defend your garden from dancing zombies using mutant plants with AI-powered enemy patterns!</p>
        <div class="game-features">
          <span class="feature-tag">ğŸ¤– AI Enemies</span>
          <span class="feature-tag">ğŸ¯ Strategy</span>
          <span class="feature-tag">âš¡ Power-ups</span>
          <span class="feature-tag">ğŸ† Achievements</span>
        </div>
        <div class="game-stats">
          <div class="game-stat">
            <div class="game-stat-value" data-stat="zombie-plant-plays">0</div>
            <div>Plays</div>
          </div>
          <div class="game-stat">
            <div class="game-stat-value" data-stat="zombie-plant-best">0</div>
            <div>Best</div>
          </div>
        </div>
        <button class="btn play-btn" onclick="playGame('games/zombie-plant-defenders/index.html')">Play Now ğŸ®</button>
      </div>

      <div class="game-card glass" data-type="puzzle" data-game="clumsy-cat">
        <span class="game-icon">ğŸ±ğŸ </span>
        <h2 class="game-title">Clumsy Cat Chaos</h2>
        <p class="game-desc">Navigate a clumsy cat through obstacles with realistic physics and AI-assisted difficulty adjustment!</p>
        <div class="game-features">
          <span class="feature-tag">ğŸ® Physics</span>
          <span class="feature-tag">ğŸ¤– Smart AI</span>
          <span class="feature-tag">ğŸ¨ Ragdoll</span>
          <span class="feature-tag">â­ Levels</span>
        </div>
        <div class="game-stats">
          <div class="game-stat">
            <div class="game-stat-value" data-stat="clumsy-cat-plays">0</div>
            <div>Plays</div>
          </div>
          <div class="game-stat">
            <div class="game-stat-value" data-stat="clumsy-cat-best">0</div>
            <div>Best</div>
          </div>
        </div>
        <button class="btn play-btn" onclick="playGame('games/clumsy-cat-chaos/index.html')">Play Now ğŸ®</button>
      </div>

      <div class="game-card glass" data-type="strategy" data-game="office-prank">
        <span class="game-icon">ğŸ¢ğŸ˜‚</span>
        <h2 class="game-title">Office Prank Wars</h2>
        <p class="game-desc">Out-prank coworkers in this turn-based comedy with AI opponents and boss patrol mechanics!</p>
        <div class="game-features">
          <span class="feature-tag">ğŸ­ Multiplayer</span>
          <span class="feature-tag">ğŸ¤– AI Players</span>
          <span class="feature-tag">ğŸ¯ Turn-based</span>
          <span class="feature-tag">ğŸ˜‚ Comedy</span>
        </div>
        <div class="game-stats">
          <div class="game-stat">
            <div class="game-stat-value" data-stat="office-prank-plays">0</div>
            <div>Plays</div>
          </div>
          <div class="game-stat">
            <div class="game-stat-value" data-stat="office-prank-best">0</div>
            <div>Best</div>
          </div>
        </div>
        <button class="btn play-btn" onclick="playGame('games/office-prank-wars/index.html')">Play Now ğŸ®</button>
      </div>

      <div class="game-card glass" data-type="rhythm" data-game="dance-battle">
        <span class="game-icon">ğŸ•ºğŸ’ƒ</span>
        <h2 class="game-title">Dance Battle Seniors</h2>
        <p class="game-desc">Rhythm game with elderly dancers, combo systems, and AI-powered beat detection!</p>
        <div class="game-features">
          <span class="feature-tag">ğŸµ Rhythm</span>
          <span class="feature-tag">ğŸ¤– Beat AI</span>
          <span class="feature-tag">âš¡ Combos</span>
          <span class="feature-tag">ğŸª Characters</span>
        </div>
        <div class="game-stats">
          <div class="game-stat">
            <div class="game-stat-value" data-stat="dance-battle-plays">0</div>
            <div>Plays</div>
          </div>
          <div class="game-stat">
            <div class="game-stat-value" data-stat="dance-battle-best">0</div>
            <div>Best</div>
          </div>
        </div>
        <button class="btn play-btn" onclick="playGame('games/dance-battle-seniors/index.html')">Play Now ğŸ®</button>
      </div>

      <div class="game-card glass" data-type="action" data-game="food-fight">
        <span class="game-icon">ğŸ•ğŸŒ®</span>
        <h2 class="game-title">Food Fight Frenzy</h2>
        <p class="game-desc">Epic food battles with AI enemies, power-ups, and real-time multiplayer action!</p>
        <div class="game-features">
          <span class="feature-tag">âš”ï¸ Action</span>
          <span class="feature-tag">ğŸ¤– AI Combat</span>
          <span class="feature-tag">ğŸ¯ Multiplayer</span>
          <span class="feature-tag">ğŸ’¥ Power-ups</span>
        </div>
        <div class="game-stats">
          <div class="game-stat">
            <div class="game-stat-value" data-stat="food-fight-plays">0</div>
            <div>Plays</div>
          </div>
          <div class="game-stat">
            <div class="game-stat-value" data-stat="food-fight-best">0</div>
            <div>Best</div>
          </div>
        </div>
        <button class="btn play-btn" onclick="playGame('games/food-fight-frenzy/index.html')">Play Now ğŸ®</button>
      </div>
    </div>

    <div class="leaderboard glass">
      <h2 class="leaderboard-title">ğŸ† Global Leaderboard</h2>
      <div class="leaderboard-list" id="leaderboard"></div>
    </div>
  </div>

  <button class="ai-toggle" onclick="toggleAI()" aria-label="Toggle AI Assistant">
    ğŸ¤–
  </button>

  <div class="ai-panel glass" id="ai-panel">
    <h3>ğŸ¤– AI Gaming Assistant</h3>
    <div class="ai-messages" id="ai-messages">
      <div class="ai-message">
        ğŸ‘‹ Hi! I'm your AI gaming assistant. I can help you improve your gameplay, suggest strategies, and track your progress!
      </div>
    </div>
    <button class="btn" onclick="getAIRecommendation()">Get Recommendation</button>
  </div>

  <script src="assets/js/game-utils.js"></script>
  <script src="assets/js/ai-assistant.js"></script>
  <script src="assets/js/analytics.js"></script>
  <script>
    const ai = new AIAssistant();
    let currentFilter = 'all';

    function init() {
      GameUtils.initTheme();
      updateThemeIcon();
      loadStats();
      loadLeaderboard();
    }

    function toggleTheme() {
      const theme = GameUtils.toggleTheme();
      updateThemeIcon();
    }

    function updateThemeIcon() {
      const theme = document.documentElement.getAttribute('data-theme');
      document.getElementById('theme-icon').textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    }

    function toggleAI() {
      const panel = document.getElementById('ai-panel');
      panel.classList.toggle('active');
    }

    function loadStats() {
      let totalPlays = 0, bestScore = 0, totalTime = 0;
      
      ['zombie-plant', 'clumsy-cat', 'office-prank', 'dance-battle', 'food-fight'].forEach(game => {
        const analytics = new GameAnalytics(game);
        const stats = analytics.getStats();
        
        if (stats) {
          totalPlays += stats.totalGames;
          bestScore = Math.max(bestScore, stats.bestScore);
          totalTime += stats.totalPlayTime;
          
          document.querySelector(`[data-stat="${game}-plays"]`).textContent = stats.totalGames;
          document.querySelector(`[data-stat="${game}-best"]`).textContent = Math.round(stats.bestScore);
        }
      });

      document.getElementById('total-plays').textContent = totalPlays;
      document.getElementById('best-score').textContent = Math.round(bestScore);
      document.getElementById('play-time').textContent = (totalTime / 3600000).toFixed(1) + 'h';
    }

    function loadLeaderboard() {
      const allScores = [];
      
      ['zombie-plant', 'clumsy-cat', 'office-prank', 'dance-battle', 'food-fight'].forEach(game => {
        const scores = GameUtils.getLeaderboard(game, 5);
        scores.forEach(s => allScores.push({ ...s, game }));
      });

      allScores.sort((a, b) => b.score - a.score);
      const top10 = allScores.slice(0, 10);

      const leaderboard = document.getElementById('leaderboard');
      leaderboard.innerHTML = top10.map((item, i) => {
        const rankClass = i === 0 ? 'gold' : i === 1 ? 'silver' : i === 2 ? 'bronze' : '';
        const medal = i === 0 ? 'ğŸ¥‡' : i === 1 ? 'ğŸ¥ˆ' : i === 2 ? 'ğŸ¥‰' : '';
        return `
          <div class="leaderboard-item">
            <span class="rank ${rankClass}">${medal} #${i + 1}</span>
            <span>${item.game}</span>
            <span><strong>${Math.round(item.score)}</strong> pts</span>
          </div>
        `;
      }).join('') || '<div class="ai-message">No scores yet. Start playing to see the leaderboard!</div>';
    }

    function filterGames() {
      const search = document.getElementById('search').value.toLowerCase();
      const cards = document.querySelectorAll('.game-card');
      
      cards.forEach(card => {
        const title = card.querySelector('.game-title').textContent.toLowerCase();
        const desc = card.querySelector('.game-desc').textContent.toLowerCase();
        const type = card.dataset.type;
        
        const matchesSearch = title.includes(search) || desc.includes(search);
        const matchesFilter = currentFilter === 'all' || type === currentFilter;
        
        card.style.display = matchesSearch && matchesFilter ? 'block' : 'none';
      });
    }

    function filterByType(type) {
      currentFilter = type;
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      filterGames();
    }

    function playGame(url) {
      GameUtils.playSound(800, 100);
      GameUtils.vibrate([50]);
      window.location.href = url;
    }

    function getAIRecommendation() {
      const messages = document.getElementById('ai-messages');
      const recommendations = [
        "ğŸ¯ Try Zombie Plant Defenders for strategic gameplay!",
        "âš¡ Your reaction time is improving! Try harder difficulty.",
        "ğŸ† You're close to unlocking an achievement!",
        "ğŸ’¡ Tip: Use combos to maximize your score!",
        "ğŸ® You've played 5 games today. Great dedication!"
      ];
      
      const msg = document.createElement('div');
      msg.className = 'ai-message';
      msg.textContent = recommendations[Math.floor(Math.random() * recommendations.length)];
      messages.appendChild(msg);
      messages.scrollTop = messages.scrollHeight;
    }

    init();
  </script>
</body>
</html>
